/* Importar fuentes de Google */
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
    :root {
        /* Variables de color existentes */
        --background: 0 0% 100%;
        --foregrounds: 222.2 84% 4.9%;

        --card: 0 0% 100%;
        --card-foreground: 222.2 84% 4.9%;

        --popover: 0 0% 100%;
        --popover-foreground: 222.2 84% 4.9%;

        --primary: 222.2 47.4% 11.2%;
        --primary-foreground: 210 40% 98%;

        --secondary: 210 40% 96.1%;
        --secondary-foreground: 222.2 47.4% 11.2%;

        --muted: 210 40% 96.1%;
        --muted-foreground: 215.4 16.3% 46.9%;

        --accent: 210 40% 96.1%;
        --accent-foreground: 222.2 47.4% 11.2%;

        --destructive: 0 84.2% 60.2%;
        --destructive-foreground: 210 40% 98%;

        --border: 214.3 31.8% 91.4%;
        --input: 214.3 31.8% 91.4%;
        --ring: 222.2 84% 4.9%;

        --radius: 0.5rem;

        --chart-1: 12 76% 61%;
        --chart-2: 173 58% 39%;
        --chart-3: 197 37% 24%;
        --chart-4: 43 74% 66%;
        --chart-5: 27 87% 67%;

        /* Variables de tipografía */
        --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        --font-display: 'Poppins', var(--font-sans);

        /* Escala de tipografía */
        --font-size-xs: 0.75rem;
        /* 12px */
        --font-size-sm: 0.875rem;
        /* 14px */
        --font-size-base: 1rem;
        /* 16px */
        --font-size-lg: 1.125rem;
        /* 18px */
        --font-size-xl: 1.25rem;
        /* 20px */
        --font-size-2xl: 1.5rem;
        /* 24px */
        --font-size-3xl: 1.875rem;
        /* 30px */
        --font-size-4xl: 2.25rem;
        /* 36px */

        /* Line heights */
        --line-height-tight: 1.25;
        --line-height-normal: 1.5;
        --line-height-relaxed: 1.75;

        /* Font weights */
        --font-weight-light: 300;
        --font-weight-normal: 400;
        --font-weight-medium: 500;
        --font-weight-semibold: 600;
        --font-weight-bold: 700;

        /* Letter spacing */
        --letter-spacing-tighter: -0.05em;
        --letter-spacing-tight: -0.025em;
        --letter-spacing-normal: 0;
        --letter-spacing-wide: 0.025em;
        --letter-spacing-wider: 0.05em;
    }

    .dark {
        /* Base OneDarkPro inspirado con grises oscuros */
        --background: 220 13% 15%;
        /* #1e222a - fondo principal más oscuro */
        --foreground: 220 14% 98%;
        /* #f8f9fc - texto principal más claro para mejor contraste */

        --card: 218 13% 23%;
        /* #323842 - fondo de tarjetas */
        --card-foreground: 220 14% 98%;
        /* #f8f9fc - texto en tarjetas más claro */

        --popover: 218 13% 23%;
        /* #323842 - fondos emergentes */
        --popover-foreground: 220 14% 98%;
        /* #f8f9fc - texto en emergentes más claro */

        /* Color primario más azul para destacar en modo oscuro */
        --primary: 218 100% 65%;
        /* #61afef - azul destacado */
        --primary-foreground: 220 13% 18%;
        /* #282c34 - texto sobre azul */
        --secondary: 220 13% 25%;
        /* #373d49 - fondo secundario */
        --secondary-foreground: 220 14% 98%;
        /* #f8f9fc - texto secundario más claro */

        --muted: 218 13% 20%;
        /* #2d323b - fondos atenuados */
        --muted-foreground: 220 14% 70%;
        /* #9ba3b3 - texto atenuado más claro para mejor legibilidad */

        --accent: 220 13% 28%;
        /* Cambiado a un gris neutro */
        --accent-foreground: 220 14% 96%;
        /* Texto claro sobre el gris neutro */

        --destructive: 5 80% 60%;
        /* #e06c75 - color para errores/destructivo */
        --destructive-foreground: 220 14% 96%;
        /* #abb2bf - texto sobre destructivo */

        --border: 218 13% 30%;
        /* #3e4451 - bordes */
        --input: 218 13% 30%;
        /* #3e4451 - fondos de inputs */
        --ring: 218 100% 65%;
        /* #61afef - anillos de focus */

        /* Colores para gráficos en modo oscuro */
        --chart-1: 218 100% 65%;
        /* #61afef - azul */
        --chart-2: 180 80% 45%;
        /* #56b6c2 - cyan */
        --chart-3: 35 80% 60%;
        /* #e5c07b - amarillo */
        --chart-4: 5 80% 60%;
        /* #e06c75 - rojo */
        --chart-5: 300 65% 65%;
        /* #c678dd - púrpura */
    }
}

@layer base {
    * {
        @apply border-border;
    }

    html {
        font-family: var(--font-sans);
        font-size: 16px;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }

    body {
        @apply bg-background text-foreground;
        font-feature-settings: "rlig" 1, "calt" 1;
    }

    h1,
    h2,
    h3,
    h4,
    .font-display {
        font-family: var(--font-display);
        letter-spacing: var(--letter-spacing-tight);
    }

    h1 {
        font-size: var(--font-size-3xl);
        font-weight: var(--font-weight-bold);
        line-height: var(--line-height-tight);
    }

    h2 {
        font-size: var(--font-size-2xl);
        font-weight: var(--font-weight-semibold);
        line-height: var(--line-height-tight);
    }

    h3 {
        font-size: var(--font-size-xl);
        font-weight: var(--font-weight-medium);
        line-height: var(--line-height-normal);
    }

    h4 {
        font-size: var(--font-size-lg);
        font-weight: var(--font-weight-medium);
        line-height: var(--line-height-normal);
    }

    p {
        font-size: var(--font-size-base);
        line-height: var(--line-height-relaxed);
    }

    .text-xs {
        font-size: var(--font-size-xs);
        line-height: var(--line-height-relaxed);
    }

    .text-sm {
        font-size: var(--font-size-sm);
        line-height: var(--line-height-normal);
    }

    .text-base {
        font-size: var(--font-size-base);
        line-height: var(--line-height-normal);
    }

    .text-lg {
        font-size: var(--font-size-lg);
        line-height: var(--line-height-normal);
    }

    .text-xl {
        font-size: var(--font-size-xl);
        line-height: var(--line-height-tight);
    }

    .text-2xl {
        font-size: var(--font-size-2xl);
        line-height: var(--line-height-tight);
    }
}

/* Estilos específicos para los mapas de Leaflet */
.leaflet-container {
    width: 100%;
    height: 100%;
    z-index: 0;
}

.map-container {
    z-index: 0;
    position: relative;
}

/* Asegurar que los controles del mapa estén por encima de otros elementos */
.leaflet-control-container .leaflet-top,
.leaflet-control-container .leaflet-bottom {
    z-index: 5 !important;
}

/* Arreglo para que los popups y tooltips no sean ocultados por otros elementos */
.leaflet-popup,
.leaflet-tooltip {
    z-index: 10 !important;
}

@layer utilities {
    .perspective-1000 {
        perspective: 1000px;
    }

    .preserve-3d {
        transform-style: preserve-3d;
    }

    .backface-hidden {
        backface-visibility: hidden;
    }

    /* Utilidades de tipografía */
    .font-light {
        font-weight: var(--font-weight-light);
    }

    .font-normal {
        font-weight: var(--font-weight-normal);
    }

    .font-medium {
        font-weight: var(--font-weight-medium);
    }

    .font-semibold {
        font-weight: var(--font-weight-semibold);
    }

    .font-bold {
        font-weight: var(--font-weight-bold);
    }

    .tracking-tighter {
        letter-spacing: var(--letter-spacing-tighter);
    }

    .tracking-tight {
        letter-spacing: var(--letter-spacing-tight);
    }

    .tracking-normal {
        letter-spacing: var(--letter-spacing-normal);
    }

    .tracking-wide {
        letter-spacing: var(--letter-spacing-wide);
    }

    .tracking-wider {
        letter-spacing: var(--letter-spacing-wider);
    }
}

/* Estilos personalizados para los tooltips de los marcadores del mapa */
.leaflet-tooltip.custom-tooltip {
    background-color: white !important;
    border-radius: 12px !important;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.15) !important;
    border: 1px solid rgba(0, 0, 0, 0.05) !important;
    padding: 0 !important;
    font-family: var(--font-sans) !important;
    overflow: hidden !important;
    color: #1e293b !important;
}

/* Tooltips en modo oscuro */
.dark .leaflet-tooltip.custom-tooltip {
    background-color: hsl(218, 13%, 23%) !important;
    border: 1px solid hsl(218, 13%, 30%) !important;
    color: hsl(220, 14%, 98%) !important;
    box-shadow: 0 4px 14px rgba(0, 0, 0, 0.4) !important;
}

/* Ocultar la flecha del tooltip */
.leaflet-tooltip.custom-tooltip:before {
    display: none !important;
}

/* Estilos específicos para el contenido del tooltip */
.leaflet-tooltip.custom-tooltip .text-primary {
    color: #3b82f6 !important;
}

.dark .leaflet-tooltip.custom-tooltip .text-primary {
    color: hsl(218, 100%, 65%) !important;
}

.leaflet-tooltip.custom-tooltip .text-slate-600 {
    color: #64748b !important;
}

.dark .leaflet-tooltip.custom-tooltip .text-slate-600 {
    color: hsl(220, 14%, 70%) !important;
}

.leaflet-tooltip.custom-tooltip .text-slate-700 {
    color: #334155 !important;
}

.dark .leaflet-tooltip.custom-tooltip .text-slate-700 {
    color: hsl(220, 14%, 85%) !important;
}

/* Estilos para los estados en tooltips */
.leaflet-tooltip.custom-tooltip .text-green-600 {
    color: #16a34a !important;
}

.dark .leaflet-tooltip.custom-tooltip .text-green-600 {
    color: #4ade80 !important;
}

.leaflet-tooltip.custom-tooltip .text-red-600 {
    color: #dc2626 !important;
}

.dark .leaflet-tooltip.custom-tooltip .text-red-600 {
    color: #f87171 !important;
}

.leaflet-tooltip.custom-tooltip .text-amber-600 {
    color: #d97706 !important;
}

.dark .leaflet-tooltip.custom-tooltip .text-amber-600 {
    color: #fbbf24 !important;
}

/* Estilos para componentes específicos en modo oscuro */
.dark .card {
    background-color: hsl(var(--card));
    border-color: hsl(var(--border));
    color: hsl(var(--card-foreground));
}

.dark .leaflet-container {
    border-radius: 8px;
    overflow: hidden;
}

/* Estilos para los controles del mapa en modo oscuro */
.dark .leaflet-control-zoom a {
    background-color: hsl(var(--card));
    color: hsl(var(--card-foreground));
    border-color: hsl(var(--border));
}

.dark .leaflet-control-zoom a:hover {
    background-color: hsl(var(--secondary));
}

/* Estilos específicos para el componente ParkingPlan en modo oscuro */
.dark .plaza-libre {
    background-color: rgba(56, 189, 114, 0.1);
    border-color: rgba(56, 189, 114, 0.3);
    color: #4ade80;
}

.dark .plaza-ocupada {
    background-color: rgba(239, 68, 68, 0.1);
    border-color: rgba(239, 68, 68, 0.3);
    color: #f87171;
}

.dark .plaza-reservada {
    background-color: rgba(245, 158, 11, 0.1);
    border-color: rgba(245, 158, 11, 0.3);
    color: #fbbf24;
}

.dark .badge {
    border-color: transparent;
}

/* Efectos de hover para botones en modo oscuro */
.dark button:hover:not(:disabled) {
    filter: brightness(1.1);
}

/* Mejora del contraste entre las secciones y las tarjetas */
.dark .bg-gray-50,
.dark .bg-gray-100 {
    background-color: hsl(220, 13%, 18%);
    /* Fondo de sección ligeramente más claro que el fondo principal */
}

.dark .bg-white {
    background-color: hsl(218, 13%, 23%);
    /* Tarjetas más claras que el fondo de sección */
}

/* Mantener la misma relación visual de contraste que en modo claro */
.dark [class*="card"],
.dark [class*="Card"] {
    background-color: hsl(218, 13%, 23%);
    border-color: hsl(218, 13%, 30%);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

/* Estilizar bordes y sombras */
.dark .border,
.dark [class*="border"] {
    border-color: hsl(218, 13%, 30%);
}

.dark .shadow,
.dark [class*="shadow"] {
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

/* Estilos específicos para tarjetas de reservas en modo oscuro */
.dark .ReservaCard,
.dark [class*="reserva-card"] {
    background-color: hsl(220, 13%, 22%);
    border-color: hsl(220, 13%, 30%);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

/* Mejorar gradientes en modo oscuro */
.dark .bg-gradient-to-r.from-blue-600.to-cyan-500 {
    background-image: linear-gradient(to right, rgb(37, 99, 235), rgb(8, 145, 178));
}

/* Ajustar contraste y colores de fondo para las tarjetas de ReservaCard */
.dark .rounded-2xl.overflow-hidden.shadow-md:not(.border-dashed) {
    background-color: hsl(220, 13%, 22%);
    border: 1px solid hsl(220, 13%, 28%);
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.25);
}

/* Mejorar visibilidad de los íconos en modo oscuro */
.dark .text-blue-500 {
    color: hsl(218, 100%, 65%);
}

/* Estilo para botones ghost en modo oscuro */
.dark .bg-white\/20 {
    background-color: rgba(255, 255, 255, 0.15);
}

/* Mejorar los estilos de los popups y diálogos */
.dark .bg-gray-50.dark\:bg-gray-700\/50 {
    background-color: hsl(220, 13%, 25%);
}